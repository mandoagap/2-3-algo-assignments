import argparse
import random
from collections import defaultdict, deque

def prosomoiosi_anexartitis_allilouxias(grafo, seeds, pithanotita):
    """Προσομοίωση της Ανεξάρτητης Αλληλουχίας."""
    energoi_synolou = set(seeds)
    oura_kombon = deque(seeds)
    
    while len(oura_kombon) > 0:
        kombos = oura_kombon.popleft()
        for geitonas in grafo[kombos]:
            if geitonas not in energoi_synolou:
                rand = random.random()
                if rand < pithanotita:
                    energoi_synolou.add(geitonas)
                    oura_kombon.append(geitonas)
    
    return len(energoi_synolou)

def ypologismos_perithoriakou_ofelous(grafo, seeds, neos_kombos, p, epanalipseis):
    """Υπολογισμός του περιθωριακού οφέλους από την προσθήκη ενός νέου κόμβου."""
    trexousa_epiroi = sum(prosomoiosi_anexartitis_allilouxias(grafo, seeds, p) for _ in range(epanalipseis)) / epanalipseis
    nea_epiroi = sum(prosomoiosi_anexartitis_allilouxias(grafo, seeds + [neos_kombos], p) for _ in range(epanalipseis)) / epanalipseis
    epiroi_ayksisi = nea_epiroi - trexousa_epiroi
    return epiroi_ayksisi

def select_seeds_max_degree(grafo, k):
    """Επιλογή κόμβων με το μέγιστο βαθμό γειτνίασης."""
    vathmos = {kombos: len(geitones) for kombos, geitones in grafo.items()}
    taksinomimenoi_kombos = sorted(vathmos, key=lambda x: (-vathmos[x], x))
    return taksinomimenoi_kombos[:k]
